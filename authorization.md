# Oauth Authorization Guidelines

To request a user's authorization, your application must follow these steps.

## 1. Redirect the User to the Authorization URL

https://app.formassembly.com/oauth/login?type=web&client_id=CLIENT_ID&redirect_uri=RETURN_URL&response_type=code

  + `CLIENT_ID`: The unique client ID generated by FormAssembly for your client application (see [Registration](#registration) above).
  + `RETURN_URL`: The URL that your user will be returned to when they complete the authorization step on FormAssembly. This value must be URL-encoded.

## 2. Retrieve the Authorization Code

FormAssembly will append the **code** query string parameter to your RETURN_URL when returning the user to the URL. For instance, `redirect_uri=https%3A%2F%2Fwww.yourapp.com` (note that the value is URL-encoded) will result in the user being taken to `https://www.yourapp.com?code=XXXXXXXXXX` after authorizing FormAssembly.

Retrieve the code from the query string. You will need it to obtain the access token.

## 3. Request an Access Token

Execute an HTTP request *from your server* (do *not* direct the user) to request an **access token**.

 + URL: https://app.formassembly.com/oauth/access_token
 + HTTP Method: POST
 + Post Data:


 | Parameter Name | Value  | Comment
 | ---------- | ---------- | ---------- |
 | grant_type | authorization_code | Use this value as-is |
 | type | web_server | Use this value as-is |
 | client_id | CLIENT_ID | Use your unique client application ID issued by FormAssembly |
 | client_secret | CLIENT_SECRET | Use your unique client application secret issued by FormAssembly |
 | redirect_uri | RETURN_URL | The same `RETURN_URL` used in [Step 1](#1-redirect-the-user-to-the-authorization-url) |
 | code | CODE | The code parameter you obtained in [Step 2](#2-retrieve-the-authorization-code) |


The response to this request will be a JSON object, like so:

    {
      "access_token":"XXXXXXXXXXXXXX",
      "expires_in":XXXXX,
      "scope":XXXX,
      "refresh_token":"XXXXXXXXXXXX"
    }

Store the `access_token` value. You'll need it for every API request on the user account. Since the access token is valid for only one user account, you will typically obtain multiple `access_token`s from multiple users, and you must store and manage those tokens accordingly.
